<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êï∞Â≠¶È¢òÈ™åËØÅÁ†ÅÊµãËØï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', monospace;
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 450px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .instruction {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-radius: 12px;
            border-left: 5px solid #ff9800;
            font-size: 1.1rem;
            color: #e65100;
            font-weight: 600;
        }
        
        .captcha-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 16px;
            border: 3px solid #e9ecef;
            margin-bottom: 30px;
            min-height: 180px;
            position: relative;
            overflow: hidden;
        }
        
        .math-expression {
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            color: #2c3e50;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 2px solid #3498db;
            position: relative;
            z-index: 10;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .noise-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }
        
        .noise-line {
            position: absolute;
            background: linear-gradient(45deg, #e74c3c, #f39c12);
            opacity: 0.3;
            animation: moveLine 4s linear infinite;
        }
        
        .noise-dot {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #95a5a6;
            border-radius: 50%;
            opacity: 0.4;
            animation: float 2s ease-in-out infinite;
        }
        
        .noise-text {
            position: absolute;
            font-size: 12px;
            color: #bdc3c7;
            font-weight: bold;
            opacity: 0.5;
            animation: fadeInOut 3s ease-in-out infinite;
        }
        
        @keyframes moveLine {
            0% { transform: translateX(-100px) rotate(0deg); }
            100% { transform: translateX(100px) rotate(360deg); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            border: 3px solid #3498db;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            color: #2c3e50;
            background: white;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            transform: scale(1.02);
        }
        
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(149, 165, 166, 0.4);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-weight: 700;
            font-size: 1.1rem;
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .result.success {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            border: 3px solid #27ae60;
        }
        
        .result.error {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border: 3px solid #c0392b;
        }
        
        .difficulty-selector {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .difficulty-selector label {
            margin-right: 15px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .difficulty-selector select {
            padding: 8px 15px;
            border: 2px solid #3498db;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: #2c3e50;
            cursor: pointer;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 600;
        }
        
        .timer {
            font-size: 16px;
            font-weight: bold;
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¢ Êï∞Â≠¶È¢òÈ™åËØÅÁ†Å</h1>
        
        <div class="instruction">
            <strong>ËØ∑ËÆ°ÁÆó‰∏ãÈù¢ÁöÑÊï∞Â≠¶È¢òÂπ∂ËæìÂÖ•Á≠îÊ°àÔºö</strong>
        </div>
        
        <div class="difficulty-selector">
            <label for="difficulty">ÈöæÂ∫¶Ôºö</label>
            <select id="difficulty" onchange="generateMathCaptcha()">
                <option value="easy">ÁÆÄÂçï (1-20)</option>
                <option value="medium">‰∏≠Á≠â (1-50)</option>
                <option value="hard">Âõ∞Èöæ (1-100)</option>
            </select>
        </div>
        
        <div class="captcha-container">
            <div class="noise-bg" id="noiseBg">
                <!-- Âπ≤Êâ∞ÂÖÉÁ¥†Â∞ÜÂú®ËøôÈáåÁîüÊàê -->
            </div>
            
            <div class="math-expression" id="mathExpression">
                <!-- Êï∞Â≠¶Ë°®ËææÂºèÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
            </div>
            
            <input type="number" class="answer-input" id="answerInput" placeholder="ËØ∑ËæìÂÖ•Á≠îÊ°à" maxlength="6">
        </div>
        
        <div class="actions">
            <button class="btn btn-primary" onclick="validateAnswer()">È™åËØÅÁ≠îÊ°à</button>
            <button class="btn btn-secondary" onclick="generateMathCaptcha()">Êç¢‰∏ÄÈ¢ò</button>
        </div>
        
        <div class="result" id="result"></div>
        
        <div class="stats">
            <span>È¢òÁõÆÁ±ªÂûã: <span id="operationType">-</span></span>
            <span>Ê≠£Á°ÆÁ≠îÊ°à: <span id="correctAnswer">***</span></span>
            <span class="timer">Áî®Êó∂: <span id="timeSpent">0</span>Áßí</span>
        </div>
    </div>

    <script>
        let currentAnswer = 0;
        let startTime = 0;
        let currentExpression = '';
        let operationType = '';
        
        const operators = ['+', '-', '√ó', '√∑'];
        const operatorSymbols = {
            '+': '+',
            '-': '-',
            '√ó': '*',
            '√∑': '/'
        };
        
        const noiseTexts = ['123', '456', '789', '000', '=-=', '+++', '---', '***', '///', '|||', '~~~'];
        
        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function generateMathCaptcha() {
            const difficulty = document.getElementById('difficulty').value;
            let range = { min: 1, max: 20 };
            
            switch(difficulty) {
                case 'medium':
                    range = { min: 1, max: 50 };
                    break;
                case 'hard':
                    range = { min: 1, max: 100 };
                    break;
            }
            
            const operator = operators[Math.floor(Math.random() * operators.length)];
            operationType = operator;
            
            let num1, num2, answer;
            
            switch(operator) {
                case '+':
                    num1 = getRandomNumber(range.min, range.max);
                    num2 = getRandomNumber(range.min, range.max);
                    answer = num1 + num2;
                    break;
                case '-':
                    num1 = getRandomNumber(range.min + 10, range.max);
                    num2 = getRandomNumber(range.min, num1);
                    answer = num1 - num2;
                    break;
                case '√ó':
                    num1 = getRandomNumber(range.min, Math.min(range.max / 5, 20));
                    num2 = getRandomNumber(range.min, Math.min(range.max / 5, 20));
                    answer = num1 * num2;
                    break;
                case '√∑':
                    // Á°Æ‰øùÊï¥Èô§
                    num2 = getRandomNumber(2, Math.min(range.max / 5, 15));
                    answer = getRandomNumber(range.min, Math.min(range.max / num2, 20));
                    num1 = answer * num2;
                    break;
            }
            
            currentAnswer = answer;
            currentExpression = `${num1} ${operator} ${num2} = ?`;
            
            document.getElementById('mathExpression').textContent = currentExpression;
            document.getElementById('answerInput').value = '';
            document.getElementById('answerInput').focus();
            document.getElementById('result').style.display = 'none';
            document.getElementById('operationType').textContent = operator;
            document.getElementById('correctAnswer').textContent = '***';
            
            generateNoiseElements();
            startTime = Date.now();
            updateTimer();
        }
        
        function generateNoiseElements() {
            const noiseBg = document.getElementById('noiseBg');
            noiseBg.innerHTML = '';
            
            // ÁîüÊàêÂπ≤Êâ∞Á∫øÊù°
            for (let i = 0; i < 8; i++) {
                const line = document.createElement('div');
                line.className = 'noise-line';
                line.style.width = '2px';
                line.style.height = getRandomNumber(20, 60) + 'px';
                line.style.left = Math.random() * 100 + '%';
                line.style.top = Math.random() * 100 + '%';
                line.style.transform = `rotate(${Math.random() * 360}deg)`;
                line.style.animationDelay = Math.random() * 2 + 's';
                noiseBg.appendChild(line);
            }
            
            // ÁîüÊàêÂπ≤Êâ∞ÁÇπ
            for (let i = 0; i < 30; i++) {
                const dot = document.createElement('div');
                dot.className = 'noise-dot';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.top = Math.random() * 100 + '%';
                dot.style.animationDelay = Math.random() * 2 + 's';
                noiseBg.appendChild(dot);
            }
            
            // ÁîüÊàêÂπ≤Êâ∞ÊñáÂ≠ó
            for (let i = 0; i < 15; i++) {
                const text = document.createElement('div');
                text.className = 'noise-text';
                text.textContent = noiseTexts[Math.floor(Math.random() * noiseTexts.length)];
                text.style.left = Math.random() * 90 + '%';
                text.style.top = Math.random() * 90 + '%';
                text.style.fontSize = (8 + Math.random() * 8) + 'px';
                text.style.animationDelay = Math.random() * 3 + 's';
                noiseBg.appendChild(text);
            }
        }
        
        function validateAnswer() {
            const userAnswer = parseInt(document.getElementById('answerInput').value);
            const timeTaken = Math.round((Date.now() - startTime) / 1000);
            
            if (isNaN(userAnswer)) {
                showResult('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊï∞Â≠óÔºÅ', 'error');
                return;
            }
            
            document.getElementById('correctAnswer').textContent = currentAnswer;
            
            if (userAnswer === currentAnswer) {
                showResult(`üéâ Ê≠£Á°ÆÁ≠îÊ°àÔºÅÁî®Êó∂ ${timeTaken} Áßí`, 'success');
            } else {
                showResult(`‚ùå ÈîôËØØÔºÅÊ≠£Á°ÆÁ≠îÊ°àÊòØ ${currentAnswer}`, 'error');
            }
        }
        
        function showResult(message, type) {
            const result = document.getElementById('result');
            result.textContent = message;
            result.className = `result ${type}`;
            result.style.display = 'block';
        }
        
        function updateTimer() {
            const timer = setInterval(() => {
                if (startTime > 0) {
                    const elapsed = Math.round((Date.now() - startTime) / 1000);
                    document.getElementById('timeSpent').textContent = elapsed;
                }
            }, 1000);
        }
        
        // ÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜ
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                validateAnswer();
            }
        });
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÁîüÊàêÁ¨¨‰∏ÄÈ¢ò
        window.onload = function() {
            generateMathCaptcha();
        };
    </script>
</body>
</html>